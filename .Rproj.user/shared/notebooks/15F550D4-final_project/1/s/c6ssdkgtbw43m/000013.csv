"0",""
"0","# Check if finding_category column exists"
"0","if(""finding_category"" %in% colnames(aviation_clean)) {"
"0","  # Analyze by finding category (Aircraft, Personnel, Environmental, etc.)"
"0","  finding_category_summary <- aviation_clean %>%"
"0","    filter(!is.na(finding_category)) %>%"
"0","    group_by(finding_category) %>%"
"0","    summarise("
"0","      count = n(),"
"0","      total_injuries = sum(inj_tot_t, na.rm = TRUE),"
"0","      avg_injuries = mean(inj_tot_t, na.rm = TRUE),"
"0","      percentage = round(100 * n() / nrow(aviation_clean), 1),"
"0","      .groups = 'drop'"
"0","    ) %>%"
"0","    arrange(desc(count))"
"0",""
"0","  cat(""\n\nIncident Distribution by Primary Issue Category:\n"")"
"0","  finding_category_summary %>%"
"0","    knitr::kable("
"0","      caption = ""Events by Finding Category"","
"0","      col.names = c(""Finding Category"", ""Count"", ""Total Injuries"", ""Avg Injuries"", ""Percentage"")"
"0","    )"
"0",""
"0","  # Visualization"
"0","  ggplot(finding_category_summary, aes(x = reorder(finding_category, count), y = count, fill = finding_category)) +"
"0","    geom_col() +"
"0","    coord_flip() +"
"0","    labs("
"0","      title = ""Aviation Events by Primary Issue Category"","
"0","      x = ""Category"","
"0","      y = ""Number of Events"","
"0","      subtitle = ""Based on primary NTSB finding codes"""
"0","    ) +"
"0","    theme_minimal() +"
"0","    theme("
"0","      legend.position = ""none"","
"0","      plot.margin = margin(10, 50, 10, 10)"
"0","    ) +"
"0","    geom_text(aes(label = count), hjust = -0.3, size = 3) +"
"0","    scale_x_discrete(expand = c(0, 0)) +"
"0","    scale_y_continuous(expand = expansion(mult = c(0, 0.15)))"
"0","} else {"
"0","  cat(""\nNote: finding_category column not found. Check data join.\n"")"
"0","}"
"1","

Incident Distribution by Primary Issue Category:
"
